(()=>{"use strict";function e(e){const t=document.createElement("div");t.className="alert alert-danger mt-3",t.textContent=e;const n=document.querySelector("form");if(n){const e=n.querySelector(".alert-danger");e&&e.remove(),n.appendChild(t),setTimeout((()=>{t.remove()}),3e3)}}function t(){return"true"===localStorage.getItem("isLoggedIn")}function n(e){localStorage.setItem("isLoggedIn",e)}document.addEventListener("DOMContentLoaded",(function(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)})),function(){const e=document.querySelector(".navbar");e&&window.addEventListener("scroll",(function(){window.scrollY>50?e.classList.add("navbar-scrolled"):e.classList.remove("navbar-scrolled")}))}(),document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})}))})),document.querySelectorAll("form").forEach((e=>{e.addEventListener("submit",(function(t){t.preventDefault();const n=e.querySelectorAll("input[required]");let o=!0;if(n.forEach((e=>{e.value.trim()?e.classList.remove("is-invalid"):(o=!1,e.classList.add("is-invalid"))})),o){const t=document.createElement("div");t.className="alert alert-success mt-3",t.textContent="Form submitted successfully!",e.appendChild(t),setTimeout((()=>{e.reset(),t.remove()}),2e3)}}))})),function(){const e=document.querySelectorAll("section"),t=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add("visible"),t.unobserve(e.target))}))}),{root:null,rootMargin:"0px",threshold:.1});e.forEach((e=>{t.observe(e)}))}(),document.querySelectorAll(".btn-success").forEach((e=>{e.addEventListener("click",(function(){if(t()){const e=document.createElement("div");e.className="alert alert-success mt-3",e.textContent="Successfully registered for the event!",this.parentElement.appendChild(e),setTimeout((()=>{e.remove()}),2e3)}else new bootstrap.Modal(document.getElementById("loginModal")).show()}))})),function(){const e=document.getElementById("loginForm");e&&e.addEventListener("submit",(function(e){e.preventDefault();const t=document.getElementById("loginEmail").value,o=document.getElementById("loginPassword").value;console.log("Login attempt:",{email:t,password:o}),bootstrap.Modal.getInstance(document.getElementById("loginModal")).hide(),n(!0)}));const o=document.getElementById("registerForm");o&&o.addEventListener("submit",(function(e){e.preventDefault();const t=document.getElementById("registerName").value,o=document.getElementById("registerEmail").value,r=document.getElementById("registerPassword").value;r===document.getElementById("confirmPassword").value?(console.log("Registration attempt:",{name:t,email:o,password:r}),bootstrap.Modal.getInstance(document.getElementById("registerModal")).hide(),n(!0)):alert("Passwords do not match!")})),n(t())}(),function(){const e=document.getElementById("eventSearch");e&&e.addEventListener("input",function(){let e;return function(...t){clearTimeout(e),e=setTimeout((()=>{clearTimeout(e),function(e){const t=e.target.value.toLowerCase();console.log("Searching for:",t)}(...t)}),300)}}())}(),document.querySelectorAll("form").forEach((t=>{t.addEventListener("submit",(async function(n){n.preventDefault();const o=t.querySelector('input[type="email"]');if(!o)return;const r=o.value.trim();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))return void e("Please enter a valid email address");const s=t.querySelector('button[type="submit"]'),l=s.textContent;s.disabled=!0,s.textContent="Subscribing...";try{const n=await fetch("http://localhost:3000/api/newsletter/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})}),o=await n.json();n.ok?(function(){const e=document.createElement("div");e.className="alert alert-success mt-3",e.textContent="Thank you for subscribing to our newsletter!";const t=document.querySelector("form");if(t){const n=t.querySelector(".alert-success");n&&n.remove(),t.appendChild(e),setTimeout((()=>{e.remove()}),3e3)}}(),t.reset()):e(o.error||"Failed to subscribe. Please try again.")}catch(t){console.error("Newsletter subscription error:",t),e("An error occurred. Please try again later.")}finally{s.disabled=!1,s.textContent=l}}))}))}))})();